Spice Project

{ SetUp Specifics
	Install RazorPages runtimecompilation
	Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation
	- In order to get automatic refresh of changed razor pages
	
	- In ConfigureServices:
	services.AddRazorPages().AddRazorRuntimeCompilation();
}

{ Create Areas
	* Move to their Views Folders the _ViewStart and _ViewImports
	* In _ViewStart , add the actual path to the _Layout file.
	
	* In Package Manager Console - update-database (to apply migration of the Identity schema)
	
	* Scaffold the Identity Area in order to see its pages in the Identiy Folder
	
	* Change in Startup the default route for HOME
	{area=NAME}/{controller=Home}/{action=Index}/{id?}
	
}

{ Change _Layout to reflect the desired UI 
	- Add DropDownMenu for Categories
	- Create Admin CategoryController
	- Add TagHelpers to the dropdown-items
}

{ !!! Create related list of items from selected item in dropdown !!!
	
	
	
	
	
	AJAX Call  - It needs to be called two times:
	- when we see the document is ready, we call the function
	- next time whenever the dropdown is changed (when ddlCategoryList changes).
	
	@section Scripts{ 
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial")}

    <script>
        function updateSubcastegoryList() {
            var categorySelected = document.getElementById("ddlCategoryList").value;

            $list = $('#SubcategoryList');

            $.ajax({
                url: '/Admin/Subcategory/GetSubcategory' + categorySelected,
                type: 'GET',
                dataType: 'text',
                success: function (data) {
                    results = JSON.parse(data);
                    $lis.html('');
                    $lis.append(' <ul class="list-group"> ');
                    for (i in results) {
                        $list.append('<li class="list-group-item">' + results[i].text + '</li>');
                    }
                    $list.append('</ul>');
                }
            });
        }
		
		$(document).ready(function () {
            updateSubcastegoryList();
        });

        $("#ddlCategoryList").on("change", function () {
            updateSubcastegoryList();
        })
		
    </script>

}


}


